import{d as y,r as b,a3 as w,o as C,R as r,b as I,c as P,e as t,a4 as x,a5 as i,a6 as R,a7 as S,a8 as B,a9 as E,V as k,aa as H,F as d,ab as M,ac as N,H as D,ad as F,I as T,ae as U,C as V,Z as L,af as $,y as A,ag as W,ah as q,ai as z}from"./index-DoMbq08J.js";const Z=y(()=>{const c=L(),g=()=>({text:"",title:"",order:0,slug:"",subtitle:"",allowComment:!0,id:void 0,images:[],meta:void 0}),p=e=>$(a)(e),a=b(g()),s=w(()=>c.query.id);C(async()=>{const e=s.value;if(e&&typeof e=="string"){const o=(await r.api.pages(e).get({})).data;p(o)}});const n=I(!1),u=P(),m=A(),f=async()=>{const e=()=>{try{if(!a.title||a.title.trim().length==0)throw"标题为空";if(!a.slug)throw"路径为空";return{...z(a),title:a.title.trim(),slug:a.slug.trim()}}catch(l){throw u.error(l),l}};if(s.value){if(!W(s.value))return;const l=s.value;await r.api.pages(l).put({data:e()}),u.success("修改成功")}else await r.api.pages.post({data:e()}),u.success("发布成功");m.push({name:q.ListPage,hash:"|publish"})};return()=>t(V,{headerClass:"pt-1",actionsElement:t(d,null,[t(M,{data:a,onHandleYamlParsedMeta:e=>{const{title:l,slug:o,subtitle:v,...h}=e;a.title=l??a.title,a.slug=o??a.slug,a.subtitle=v??a.subtitle,a.meta={...h}}},null),t(N,{iframe:!0,data:a},null),t(D,{icon:t(F,null,null),onClick:f},null)]),footerButtonElement:t(d,null,[t("button",{onClick:()=>{n.value=!0}},[t(T,null,{default:()=>[t(U,null,null)]})])])},{default:()=>[t(x,{class:"relative z-10 mt-3",label:"与你有个好心情~",value:a.title,onChange:e=>{a.title=e}},null),t("div",{class:"pt-3 text-gray-700 dark:text-gray-300"},[t(i,{value:a.subtitle,onChange:e=>void(a.subtitle=e)},null)]),t("div",{class:"py-3 text-gray-500"},[t("label",null,[`${R}/`]),t(i,{value:a.slug,onChange:e=>void(a.slug=e)},null)]),t(S,null,{default:()=>[t(B,{key:a.id,loading:!!(s.value&&typeof a.id>"u"),onChange:e=>{a.text=e},text:a.text},null)]}),t(E,{disabledItem:["date-picker"],onUpdateShow:e=>{n.value=e},data:a,show:n.value},{default:()=>[t(k,{label:"页面顺序"},{default:()=>[t(H,{placeholder:"",value:a.order,onUpdateValue:e=>void(a.order=e??0)},null)]})]})]})});export{Z as default};
